!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VueCoreImageUpload=e():t.VueCoreImageUpload=e()}(this,function(){return function(t){function e(r){if(a[r])return a[r].exports;var o=a[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var a={};return e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,r){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=12)}({12:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={_getImageType:function(t){var e="image/jpeg",a=t.match(/(image\/[\w]+)\.*/)[0];return void 0!==a&&(e=a),e},compress:function(t,e){var a=new FileReader,r=(t.name,t.type,t.size),o=this;a.onload=function(a){var n=new Image;n.src=a.target.result,n.onload=function(){var a=n.height,i=n.width,g=void 0,u=void 0;if(a>1280||i>1280){var m=a/i;a>=i?(g=1280,u=Math.round(1280/m)):(u=1280,g=Math.round(1280*m))}else g=a,u=i;var s=void 0,c=1,p=o._getImageType(t.type);do{var d=o._getCanvas(u*c,g*c);d.getContext("2d").drawImage(n,0,0,u*c,g*c);s=d.toDataURL(p);for(var f=window.atob(s.split(",")[1]),v=new ArrayBuffer(f.length),h=new Uint8Array(v),l=0;l<f.length;l++)h[l]=f.charCodeAt[l];var I=new Blob([h],{type:p});r=I.size,c-=.1}while(r>1024e3);e(s)}},a.readAsDataURL(t)},crop:function(t,e,a){var r=function(t){return"number"==typeof t};if(r(e.toCropImgX)&&r(e.toCropImgY)&&e.toCropImgW>0&&e.toCropImgH>0){var o=e.toCropImgW,n=e.toCropImgH;e.maxWidth&&e.maxWidth<o&&(o=e.maxWidth,n=e.toCropImgH*o/e.toCropImgW),e.maxHeight&&e.maxHeight<n&&(n=e.maxHeight);var i=this._getCanvas(o,n),g=(i.getContext("2d").drawImage(t,e.toCropImgX,e.toCropImgY,e.toCropImgW,e.toCropImgH,0,0,o,n),this._getImageType(t.src));a(i.toDataURL(g,e.compress/100))}},init:function(t,e){var a=new Image;a.src=t;var r=this;a.onload=function(){var t=r._getImageType(a.src),o=r._getCanvas(a.naturalWidth,a.naturalHeight);o.getContext("2d").drawImage(a,0,0);var n=o.toDataURL(t,100);e(n)}},rotate:function(t,e,a){var r=new Image;r.src=t.src;var o=this;r.onload=function(){var t=o._getImageType(r.src),n=o._getCanvas(r.naturalHeight,r.naturalWidth),i=n.getContext("2d");1==e?(i.rotate(90*Math.PI/180),i.translate(0,-n.width)):(i.rotate(-90*Math.PI/180),i.translate(-n.height,0)),i.drawImage(r,0,0);var g=n.toDataURL(t,100);a(g)}},resize:function(t,e,a){var r=function(t){return"number"==typeof t};if(r(e.toCropImgX)&&r(e.toCropImgY)&&e.toCropImgW>0&&e.toCropImgH>0){var o=e.toCropImgW*e.imgChangeRatio,n=e.toCropImgH*e.imgChangeRatio,i=this._getCanvas(o,n),g=(i.getContext("2d").drawImage(t,0,0,e.toCropImgW,e.toCropImgH,0,0,o,n),this._getImageType(t.src));a(i.toDataURL(g,e.compress/100))}},rotate2:function(t,e,a){var r=this;this._loadImage(t,function(o){var n=o.naturalWidth,i=o.naturalHeight,g=Math.max(n,i),u=r._getCanvas(g,g),m=u.getContext("2d");m.save(),m.translate(g/2,g/2),m.rotate(e*(Math.PI/180));var s=-g/2,c=-g/2;if(0===(e%=360))return a(t,n,i);if(e%180!=0){-90===e||270===e?s=g/2-n:c=g/2-i;var p=n;n=i,i=p}else s=g/2-n,c=g/2-i;m.drawImage(o,s,c),r._getCanvas(n,i).getContext("2d").drawImage(u,0,0,n,i,0,0,n,i);var d=r._getImageType(o.src),f=u.toDataURL(d,1);a(f,n,i)})},_loadImage:function(t,e){var a=new Image;a.src=t,a.onload=function(){e(a)},a.onerror=function(){console.log("Error: image error!")}},_getCanvas:function(t,e){var a=document.createElement("canvas");return a.width=t,a.height=e,a}}}})});
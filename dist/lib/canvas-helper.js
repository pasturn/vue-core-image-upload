!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VueCoreImageUpload=e():t.VueCoreImageUpload=e()}(this,function(){return function(t){function e(o){if(a[o])return a[o].exports;var r=a[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};return e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,o){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=12)}({12:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={_getImageType:function(t){var e="image/jpeg",a=t.match(/(image\/[\w]+)\.*/)[0];return void 0!==a&&(e=a),e},compress:function(t,e){var a=new FileReader,o=t.name,r=(t.type,t.size),n=this;console.log(t),a.onload=function(a){var i=new Image;i.src=a.target.result,i.onload=function(){var a=i.height,g=i.width,u=void 0,m=void 0;if(a>1280||g>1280){var s=a/g;a>=g?(u=1280,m=Math.round(1280/s)):(m=1280,u=Math.round(1280*s))}else u=a,m=g;var c=void 0,p=1,d=n._getImageType(t.type);do{var f=n._getCanvas(m*p,u*p);f.getContext("2d").drawImage(i,0,0,m*p,u*p);c=f.toDataURL(d);for(var l=window.atob(c.split(",")[1]),v=new ArrayBuffer(l.length),h=new Uint8Array(v),I=0;I<l.length;I++)h[I]=l.charCodeAt[I];var C=new File([h],o,{type:d});r=C.size,p-=.1}while(r>1024e3);e(c)}},a.readAsDataURL(t)},crop:function(t,e,a){var o=function(t){return"number"==typeof t};if(o(e.toCropImgX)&&o(e.toCropImgY)&&e.toCropImgW>0&&e.toCropImgH>0){var r=e.toCropImgW,n=e.toCropImgH;e.maxWidth&&e.maxWidth<r&&(r=e.maxWidth,n=e.toCropImgH*r/e.toCropImgW),e.maxHeight&&e.maxHeight<n&&(n=e.maxHeight);var i=this._getCanvas(r,n),g=(i.getContext("2d").drawImage(t,e.toCropImgX,e.toCropImgY,e.toCropImgW,e.toCropImgH,0,0,r,n),this._getImageType(t.src));a(i.toDataURL(g,e.compress/100))}},init:function(t,e){var a=new Image;a.src=t;var o=this;a.onload=function(){var t=o._getImageType(a.src),r=o._getCanvas(a.naturalWidth,a.naturalHeight);r.getContext("2d").drawImage(a,0,0);var n=r.toDataURL(t,100);e(n)}},rotate:function(t,e,a){var o=new Image;o.src=t.src;var r=this;o.onload=function(){var t=r._getImageType(o.src),n=r._getCanvas(o.naturalHeight,o.naturalWidth),i=n.getContext("2d");1==e?(i.rotate(90*Math.PI/180),i.translate(0,-n.width)):(i.rotate(-90*Math.PI/180),i.translate(-n.height,0)),i.drawImage(o,0,0);var g=n.toDataURL(t,100);a(g)}},resize:function(t,e,a){var o=function(t){return"number"==typeof t};if(o(e.toCropImgX)&&o(e.toCropImgY)&&e.toCropImgW>0&&e.toCropImgH>0){var r=e.toCropImgW*e.imgChangeRatio,n=e.toCropImgH*e.imgChangeRatio,i=this._getCanvas(r,n),g=(i.getContext("2d").drawImage(t,0,0,e.toCropImgW,e.toCropImgH,0,0,r,n),this._getImageType(t.src));a(i.toDataURL(g,e.compress/100))}},rotate2:function(t,e,a){var o=this;this._loadImage(t,function(r){var n=r.naturalWidth,i=r.naturalHeight,g=Math.max(n,i),u=o._getCanvas(g,g),m=u.getContext("2d");m.save(),m.translate(g/2,g/2),m.rotate(e*(Math.PI/180));var s=-g/2,c=-g/2;if(0===(e%=360))return a(t,n,i);if(e%180!=0){-90===e||270===e?s=g/2-n:c=g/2-i;var p=n;n=i,i=p}else s=g/2-n,c=g/2-i;m.drawImage(r,s,c),o._getCanvas(n,i).getContext("2d").drawImage(u,0,0,n,i,0,0,n,i);var d=o._getImageType(r.src),f=u.toDataURL(d,1);a(f,n,i)})},_loadImage:function(t,e){var a=new Image;a.src=t,a.onload=function(){e(a)},a.onerror=function(){console.log("Error: image error!")}},_getCanvas:function(t,e){var a=document.createElement("canvas");return a.width=t,a.height=e,a}}}})});